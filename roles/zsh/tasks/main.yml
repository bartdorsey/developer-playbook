---
# tasks file for zsh
- name: Install zsh on ubuntu
  become: yes
  apt:
    name: zsh
  when: ansible_facts.os_family|lower == 'debian'
- name: change user shell to zsh
  become: yes
  user:
    name: "{{ ansible_user_id }}"
    shell: /bin/zsh
- name: Make sure /usr/local/bin exists and is writeable on macOS by admin users
  become: yes
  file:
    path: /usr/local/bin
    state: directory
    mode: 0775
    owner: root
    group: admin
  when: ansible_distribution|lower == 'macosx'
- name: Install starship prompt
  become: yes
  shell:
    cmd: sh -c "$(curl -fsSL https://starship.rs/install.sh)" -- -y
    creates: /usr/local/bin/starship
- name: Create ~/.local/bin
  file:
    path: ~/.local/bin
    state: directory
